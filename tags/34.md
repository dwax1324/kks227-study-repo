# 네트워크 유량(Network Flow) 

https://blog.naver.com/PostView.nhn?blogId=kks227&logNo=220804885235&parentCategoryNo=&categoryNo=299&viewDate=&isShowPopularPosts=false&from=postView


### 이론

네트워크 유량  

그래프의 간선의 거리, 시간이나 가중치  
즉 cost 대신에 용량(capacity)이라는 개념이 추가된다.  

정점 u,v를 잇는 간선(u,v)가 있을 때, 정점 u에서 v방향으로 간선의 용량 이하만큼의 유량(flow)를 흘려보낸다.  
또한 그래프에서 서로다른 두 정점인 소스(source),, 싱크(sink)정점이 정해지고,  
소스 정점에서 유량을 발생시켜서 간선들을 통해 싱크 정점에 도달시키는 것이 목표다.  
유량을 발생시킬수 있는건 소스 정점 뿐이고,  
그 외 정점들은 자신이 받은 유량만큼 다시 흘려보낼 수 있다.  

![](../imgs/34/1.png)

보통 유량그래프(flow network)는 방향 그래프인 경우가 많다. 물론, 무향 그래프일 수도 있다.  

위 그래프에서 적힌 숫자는 cost가아닌 capacity다.  
그리고 S가 소스, 정점 T가 싱크이다. 보통 소스가 S,싱크가 T로 표현된다.  

![](../imgs/34/2.png)

S에서 T로 유량을 1을 하나 보내본 예시다.  
각 간선의 p/q에서 p는 유량, q는 용량이다.  
S에 유량 1을 발생시켜서, 용량이 충분히 남아있는 경로를 찾아 T까지 보낸 사진이다.  
유량을 흘려보냄을 도중에 멈춰서는 안되고, 싱크까지 도달해야만한다.  

![](../imgs/34/3.png)

한 번 더 보낸 사진이다.  
여기서 간선(D,T)는 두 경로에 모두 포함되어 있어 두 번 보낸 유량이 모두 지나가고 있다.  

![](../imgs/34/4.png)

한 번 더 4를 보낸 사진이다.  
현재까지 S에서 T로 보낸 유량의 합은 1+1+4 =6이다.  
이 상황에서 경로 \[S,A,D,T]로 유량을 더 보낼 수 있을까?  
불가능하다.  
경로속에 속한 간선(D,T)에 더이상 용량이 남아있지 않기 떄문이다.  

유량그래프의 성질을 알아보자.  
1. 각 간선에 흐르는 유량은 그 간선의 용량을 넘어선 안된다. 즉, f(u,v) <= c(u,v)다.  
f,c는 flow, capacity이다.  
2. S와 T를 제외한 정점에서는 들어오는 유량 총합과 나가는 유량 총합이 같아야한다.  
즉, Σf(k, u) = Σf(u, l)이여야한다.  

S에는 유량이 발생하고, T에는 유량이 종착하여 더이상 나가지 않기 때문에 S에서 흘리는 유량의 합 또한 T에서 들어가는 유량의 합과 같다.
즉, Σf(S, k) = Σf(k, T)이다.
3. 간선(u,v)방향으로 유량이 흐르고 있다면, 역방향으로는 음의 유량이 그만큼 흐르고 있다고 취급한다.  
즉, f(u, v) = -f(v, u)이다.

유량그래프는 S에서 T로 가는 최단경로는 아니고, S에서 T로 동시에 보낼수 있는 물질의 양이 얼마나 될것이냐를 묻는것과 비슷하다.  

대역폭(badnwidth)의 개념과도 잘 맞아떨어진다.

하지만, 보통 이런 유량그래프가 주어지면 보통 최대유량(maximum flow)를 구한다.  
즉,S에서 T로 성질들을 해치지 않고 보낼 수 있는 최대유량이다.  






### 문제


<!-- 

***

<details>

<summary>

#### _3648번: 아이돌_

</summary>

```cpp

```

</details> 


-->